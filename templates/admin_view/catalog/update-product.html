{% extends "admin_view/base.html" %}
{% load static %}
{% block title %}Edit Product | Admin{% endblock title %}
{% block extra_css %}
<style type="text/css">
    .asteriskField {
    color: red;
}
</style>
<link href="{% static 'admin_view/assets/libs/select2/select2.min.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'admin_view/assets/libs/multiselect/multi-select.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'admin_view/assets/libs/summernote/summernote-bs4.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'admin_view/assets/libs/dropzone/dropzone.min.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'admin_view/assets/libs/dropify/dropify.min.css' %}" rel="stylesheet" type="text/css" />
<!-- App css -->
<link href="{% static 'admin_view/assets/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'admin_view/assets/css/icons.min.css' %} " rel="stylesheet" type="text/css" />
<link href="{% static 'admin_view/assets/css/app.min.css' %}" rel="stylesheet" type="text/css" />

{% endblock %}
{% block page_content %}
<div id="wrapper">
    {% block topbar %} {% include 'admin_view/partials/topbar.html' %} {% endblock %}
    {% block sidebar %} {% include 'admin_view/partials/sidebar.html' %} {% endblock %}
    <!-- ============================================================== -->
    <!-- Start Page Content here -->
    <!-- ============================================================== -->
    <div class="content-page">
        <div class="content">

            <!-- Start Content-->
            <div class="container-fluid">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Admin</a></li>
                                    <li class="breadcrumb-item active">Edit Product</li>
                                </ol>
                            </div>
                            <h4 class="page-title">Edit Product ({{product.store.name|title}})</h4>
                        </div>
                    </div>
                </div>
                <!-- end page title -->


                <div>
                    {% include 'admin_view/partials/_alerts.html' %}
                    <div class="card-box" style="padding-left:12px !important; padding-right:12px !important; padding-top: 15px;">
                    <ul class="nav nav-tabs nav-bordered nav-justified">

                        <li class="nav-item">
                            <a href="#customer-new" data-toggle="tab" aria-expanded="true"
                                class="nav-link active">
                                GENERAL
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="#customer-most-orders" data-toggle="tab" aria-expanded="true"
                                class="nav-link">
                                VARIENTS {{deletevar}}
                            </a>
                        </li>
                      

                    </ul> 
                   <form method="post" action="{%url 'catalog:product-update' product.id store__slug %}" 
                    enctype="multipart/form-data">
                        {%csrf_token%}
                        <div class="tab-content" style="margin-top:-15px;">
                        
                            <div {% if deletevar %}class="tab-pane" {% else %} class="tab-pane active"{% endif %} id="customer-new">
                            {% include 'admin_view/catalog/partials/_edit_product-general.html' %}
                            </div>

                           <div {% if deletevar %}class="tab-pane active" {% else %} class="tab-pane"{% endif %} id="customer-most-orders">
                                {% include 'admin_view/catalog/partials/_edit_product-varient.html' %}
                            </div> 
                        
                    

                        </div>

                        
                            <div class="col-12 mt-4">
                                <div  class="mr-2 mb-2"  style="float: right; margin-top: -35px;">
                                     <button type="button" class="btn w-sm btn-light waves-effect"><a
                                        href="{%url 'catalog:product' store__slug%}">Cancel</a></button>
                                    <button type="button" class="btn w-sm btn-danger waves-effect waves-light">
                                        <a style="color:white;"
                                            href="{%url 'catalog:product-delete' product.id store__slug%}">Delete</a></button>
                                    <button type="submit" class="btn w-sm btn-success waves-effect waves-light"
                                     >Save</button>

                                </div>
                            </div> <!-- end col -->
                      
                    
                    </form>
                    <!-- end row -->
                    </div>

                 
                     <!-- end col -->
                </form>
        </div>
                <!-- end card-box-->


              

            </div> <!-- container -->

        </div> <!-- content -->

        <!-- Footer Start -->
        <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-6">
                        2015 - 2019 &copy; UBold theme by <a href="">Coderthemes</a>
                    </div>
                    <div class="col-md-6">
                        <div class="text-md-right footer-links d-none d-sm-block">
                            <a href="javascript:void(0);">About Us</a>
                            <a href="javascript:void(0);">Help</a>
                            <a href="javascript:void(0);">Contact Us</a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- end Footer -->

    </div>
</div>

<!-- ============================================================== -->
<!-- End Page content -->
<!-- ============================================================== -->
</div>
<!-- END wrapper -->
{% block footer %} {% include 'admin_view/partials/footer.html' %} {% endblock %}
{% block right_sidebar %} {% include 'admin_view/partials/right-sidebar.html' %} {% endblock %} {% endblock %}
{% block extra_javascript %}

<script type="text/javascript">

    function save() {
        $("#abc").submit();
    }
    function delet() {

        $("#abcd").submit();
    }
</script>
<!-- App js -->
<script src="{% static 'admin_view/assets/js/vendor.min.js' %}"></script>
<script src="{% static 'admin_view/assets/libs/multiselect/jquery.multi-select.js' %}"></script>


<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>


<script src="{% static 'admin_view/assets/libs/multiselect/jquery.multi-select.js' %}"></script>

<!-- Summernote js -->
<script src="{% static 'admin_view/assets/libs/summernote/summernote-bs4.min.js' %}"></script>
<!-- Select2 js-->
<script src="{% static 'admin_view/assets/libs/select2/select2.min.js' %}"></script>
<!-- Dropzone file uploads-->
<script src="{% static 'admin_view/assets/libs/dropzone/dropzone.min.js' %}"></script>

<script src="{% static 'admin_view/assets/libs/dropify/dropify.min.js' %}"></script>




<script>
    {% if product.image %}
    $('#id_image').dropify({
        tpl: {
            wrap: '<div class="dropify-wrapper has-preview"></div>',
            loader: '<div class="dropify-loader"></div>',
            message: '<div class="dropify-message"><span class="file-icon" /> <p>Drag and drop image here or click</p></div>',
            preview: '<div class="dropify-preview" style="display: block;"><span class="dropify-render"><img src="{{product.image.url}}" style="max-height: 300px;"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message"></p></div></div></div>',
            filename: '<p class="dropify-filename"><span class="file-icon"></span> <span class="dropify-filename-inner">{{product.image.name}}</span></p>',
            clearButton: '<button type="button" class="dropify-clear">Remove</button>',
            errorLine: '<p class="dropify-error">Error</p>',
            errorsContainer: '<div class="dropify-errors-container"><ul></ul></div>'
        }
    });
    {%endif%}
    {% if product.image1 %}
    $('#id_image1').dropify({
        tpl: {
            wrap: '<div class="dropify-wrapper has-preview"></div>',
            loader: '<div class="dropify-loader"></div>',
            message: '<div class="dropify-message"><span class="file-icon" /> <p>Drag and drop image here or click</p></div>',
            preview: '<div class="dropify-preview" style="display: block;"><span class="dropify-render"><img src="{{product.image1.url}}" style="max-height: 300px;"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message"></p></div></div></div>',
            filename: '<p class="dropify-filename"><span class="file-icon"></span> <span class="dropify-filename-inner">{{product.image1.name}}</span></p>',
            clearButton: '<button type="button" class="dropify-clear">Remove</button>',
            errorLine: '<p class="dropify-error">Error</p>',
            errorsContainer: '<div class="dropify-errors-container"><ul></ul></div>'
        }
    });
    {%endif%}
    {% if product.image2 %}
    $('#id_image2').dropify({
        tpl: {
            wrap: '<div class="dropify-wrapper has-preview"></div>',
            loader: '<div class="dropify-loader"></div>',
            message: '<div class="dropify-message"><span class="file-icon" /> <p>Drag and drop image here or click</p></div>',
            preview: '<div class="dropify-preview" style="display: block;"><span class="dropify-render"><img src="{{product.image2.url}}" style="max-height: 300px;"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message"></p></div></div></div>',
            filename: '<p class="dropify-filename"><span class="file-icon"></span> <span class="dropify-filename-inner">{{product.image2.name}}</span></p>',
            clearButton: '<button type="button" class="dropify-clear">Remove</button>',
            errorLine: '<p class="dropify-error">Error</p>',
            errorsContainer: '<div class="dropify-errors-container"><ul></ul></div>'
        }
    });
    {%endif%}
    {% if product.image3 %}
    $('#id_image3').dropify({
        tpl: {
            wrap: '<div class="dropify-wrapper has-preview"></div>',
            loader: '<div class="dropify-loader"></div>',
            message: '<div class="dropify-message"><span class="file-icon" /> <p>Drag and drop image here or click</p></div>',
            preview: '<div class="dropify-preview" style="display: block;"><span class="dropify-render"><img src="{{product.image3.url}}" style="max-height: 300px;"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message"></p></div></div></div>',
            filename: '<p class="dropify-filename"><span class="file-icon"></span> <span class="dropify-filename-inner">{{product.image3.name}}</span></p>',
            clearButton: '<button type="button" class="dropify-clear">Remove</button>',
            errorLine: '<p class="dropify-error">Error</p>',
            errorsContainer: '<div class="dropify-errors-container"><ul></ul></div>'
        }
    });
{% endif %}


</script>


<script>
    var drEvent = $('#id_image').dropify();

    drEvent.on('dropify.afterClear', function (event, element) {
        document.getElementById("image-clear_id").checked = true;
        
    });
    var drEvent1 = $('#id_image1').dropify();

    drEvent1.on('dropify.afterClear', function (event, element) {
        document.getElementById("image1-clear_id").checked = true;
        
    });
    var drEvent2 = $('#id_image2').dropify();

    drEvent2.on('dropify.afterClear', function (event, element) {
        document.getElementById("image2-clear_id").checked = true;
        
    });
    var drEvent3 = $('#id_image3').dropify();

    drEvent3.on('dropify.afterClear', function (event, element) {
        document.getElementById("image3-clear_id").checked = true;
        
    });

    function uploaded() {
        if (document.getElementById("id_image").files.length == 0) {
            document.getElementById("image-clear_id").checked = true;
        } else {
            document.getElementById("image-clear_id").checked = false;
        }

        
    }

    function uploaded1() {
        if (document.getElementById("id_image1").files.length == 0) {
            document.getElementById("image1-clear_id").checked = true;
        } else {
            document.getElementById("image1-clear_id").checked = false;
        }

        
    }

    function uploaded2() {
        if (document.getElementById("id_image2").files.length == 0) {
            document.getElementById("image2-clear_id").checked = true;
        } else {
            document.getElementById("image2-clear_id").checked = false;
        }

        
    }


    function uploaded3() {
        if (document.getElementById("id_image3").files.length == 0) {
            document.getElementById("image3-clear_id").checked = true;
        } else {
            document.getElementById("image3-clear_id").checked = false;
        }

        
    }


</script>




<!-- Init js-->
<script src="{% static 'admin_view/assets/js/pages/form-fileuploads.init.js' %}"></script>

<!-- Init js -->
<script src="{% static 'admin_view/assets/js/pages/form-advanced.init.js' %} "></script>




<script type="text/javascript">
    
$("#id_name").keyup(function(){
        var Text = $(this).val();
        Text = Text.toLowerCase();
        Text = Text.replace(/[^a-zA-Z0-9]+/g,'-');
        $("#id_slug").val(Text);        
});
</script>

<!-- <script>
    var uploadField = document.getElementById("id_image");
    
    uploadField.onchange = function() {
        if(this.files[0].size > 1500000){
           alert("File is too big!");
           this.value = "";
        };
    };
    </script> -->

{% endblock %}